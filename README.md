# Avito Backend task (Fall 2023)

# Реализовано

- основной функционал
- тестирование
- доп. задание 1 (логирование добавлений/удалений сегментов пользователям)
- доп. задание 3 (автоматическое добавление пользователей в сегмент)
- Postman-схема (.json файл в корневой папке)

# Запуск проекта

- Склонировать проект в локальную директорию
- Создать файл app.env (для удобства добавлен в проект)
- Убедиться, что DEV=false в app.env
- Запустить контейнеры

```sh
make build
// или
docker-compose up --build -d
```

- Для запуска тестов: DEV=true в app.env

```sh
make run-db
make test
```

# Примечания

- В задании сказано, что механизм миграции не нужен, но для удобства тестирования и валидации, а также для большей реюзабельности, было принято решение использовать Gorm-модели.
- При выполнении доп. задания 3 было решено добавлять процент пользователей в сегмент сразу же, а не при изменении количества пользователей. Можно было бы проверять, что в сегменте количество пользователей соответствует изначально данному проценту от всех, но возможно оверхэд от этого не стоит такой педантичности.
- Если процент пользователей при добавлении настолько мал, что целочисленно количество было бы ближе к 0, один случайный пользователь гарантированно добавится в сегмент.
- При логировании добавлений и удалений сегментов пользователям даты вводятся в формате YYYY-MM, и указанная дата отвечает за первое число указанного месяца. Например, 2023-09 будет являться 00:00:00 1 сентября 2023
